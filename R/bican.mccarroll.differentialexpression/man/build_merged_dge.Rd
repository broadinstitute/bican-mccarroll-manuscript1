% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/createDGEList.R
\name{build_merged_dge}
\alias{build_merged_dge}
\title{Build a Merged DGEList from Metacell Files and Metadata}
\usage{
build_merged_dge(
  manifest_file,
  metacell_dir,
  cell_metadata_file,
  metadata_columns,
  has_village = T,
  outDir = NULL,
  outName = NULL,
  validateRoundTrip = F
)
}
\arguments{
\item{manifest_file}{Path to the manifest file, with required columns: \code{output_name}, \code{cell_type_name}, \code{region_name}, and \code{cell_type_filter_str}.}

\item{metacell_dir}{Path to the directory containing \code{*.metacells.txt.gz} files.}

\item{cell_metadata_file}{Path to the TSV file containing donor-level metadata.}

\item{metadata_columns}{Character vector of metadata column names to include from \code{cell_metadata_file}.  The
program will automatically capture donor, cell type, region, and village (if applicable).}

\item{has_village}{Logical; if \code{TRUE}, the donor names in the metacell files are expected to be in the format \code{donor_village}.}

\item{outDir}{Optional; directory to save the merged \code{DGEList} object as two gzipped TSV files.}

\item{outName}{Optional; prefix for the output files. If \code{NULL}, no files are saved.}

\item{validateRoundTrip}{Logical; if \code{TRUE}, validates the saved DGEList by loading it back and comparing to the original.}
}
\value{
A merged \code{DGEList} object containing all samples with donor, cell type, region,
  and specified metadata columns in \code{dge$samples}.
}
\description{
This function processes a manifest and corresponding metacell count matrices to
build a merged \code{DGEList} object suitable for analysis with edgeR. The input
matrices are expected to be pseudobulked gene expression data with genes in rows
and donors in columns. Column names are renamed to include donor, cell type,
and region. Additional donor-level metadata is merged in from an external file.
}
