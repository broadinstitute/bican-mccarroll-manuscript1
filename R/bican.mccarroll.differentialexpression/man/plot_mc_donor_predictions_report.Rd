% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/donor_age_prediction.R
\name{plot_mc_donor_predictions_report}
\alias{plot_mc_donor_predictions_report}
\title{Generate a donor-level prediction report with raw and bias-corrected panels}
\usage{
plot_mc_donor_predictions_report(donor_predictions, gam_fit_df)
}
\arguments{
\item{donor_predictions}{A data.frame containing donor-level predictions
and residuals. Must contain columns \code{pred_mean},
\code{pred_mean_corrected}, \code{resid_mean}, and
\code{resid_mean_corrected}, along with any additional columns required
by \code{plot_mc_donor_predictions()}.}

\item{gam_fit_df}{A data.frame containing fitted GAM values for overlay
in the raw prediction panel. This is passed directly to
\code{plot_mc_donor_predictions()}. Set to \code{NULL} if no GAM fit
should be shown.}
}
\value{
A named list containing:
  \itemize{
    \item \code{raw_plot}: The ggplot object showing raw predictions.
    \item \code{corrected_plot}: The ggplot object showing bias-corrected predictions.
    \item \code{combined_plot}: A vertically stacked ggplot object containing both panels.
  }
}
\description{
This function produces a two-panel report summarizing donor-level model
predictions before and after age-bias correction. The top panel displays
raw predicted values (which may exhibit age-dependent bias), and the
bottom panel displays bias-corrected predictions. In both panels,
points are colored by residuals to visualize model deviation patterns.
}
\details{
The input data should be for a single grouping the model was trained on,
for example cell type and region.

Internally, the function calls \code{plot_mc_donor_predictions()} twice:
once using the original predicted values and GAM fit (for raw predictions),
and once using the bias-corrected predictions without overlaying the GAM fit.
The two plots are then vertically stacked using \code{cowplot::plot_grid()}.
}
